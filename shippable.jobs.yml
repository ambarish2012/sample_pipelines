jobs:
  - name: simple-mani
    type: manifest
    steps:
      - IN: stagingTrigger-serialCheck
      - IN: simple-params-serialCheck
      - IN: simple-image-serialCheck
      - IN: simple-opts-serialCheck
    on_failure:
      - NOTIFY: stagingSlack-serialCheck

  - name: nginx-mani
    type: manifest
    steps:
      - IN: stagingTrigger-serialCheck
      - IN: nginx-image-serialCheck
      - IN: nginx-params-serialCheck
      - IN: nginx-opts-serialCheck
    on_failure:
      - NOTIFY: stagingSlack-serialCheck

  - name: staging-dep
    type: deploy
    steps:
      - IN: simple-mani-serialCheck
      - IN: nginx-mani-serialCheck
      - IN: stagingParams-serialCheck
      - IN: stagingOpts-serialCheck
      - IN: simpleReplicas-serialCheck
      - IN: ecsStaging-serialCheck
      - TASK: managed
        deployMethod: upgrade
    on_success:
      - NOTIFY: stagingSlack-serialCheck
    on_failure:
      - NOTIFY: stagingSlack-serialCheck


  - name: parallel-dep
    type: deploy
    steps:
      - IN: simple-mani-serialCheck
      - TASK: managed
        deployMethod: upgrade
    on_success:
      - NOTIFY: stagingSlack-serialCheck
    on_failure:
      - NOTIFY: stagingSlack-serialCheck
